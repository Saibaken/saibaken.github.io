"use strict";(self.webpackChunksaibaken_page=self.webpackChunksaibaken_page||[]).push([[116],{6116:function(t,e,n){n.r(e),n.d(e,{default:function(){return T}});var r=n(2791),o=n(885),a=n(1413),i=n(9434),u=function(){return(0,i.I0)()},d=i.v9,s=n(4165),c=n(5861),l=n(9829),f=(0,l.hg)("todos/getTodos",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e,n){var r,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.next=3,fetch("https://jsonplaceholder.typicode.com/todos?_limit=15");case 3:if((o=t.sent).ok){t.next=6;break}return t.abrupt("return",r("Can't get todos, server error"));case 6:return t.next=8,o.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),p=(0,l.hg)("todos/postTodo",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e,n){var r,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.next=3,fetch("https://jsonplaceholder.typicode.com/todos",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({userId:1,title:e,completed:!1})});case 3:if((o=t.sent).ok){t.next=6;break}return t.abrupt("return",r("Can't make todo, server error"));case 6:return t.next=8,o.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),h=(0,l.hg)("todos/toggleTodo",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e,n){var r,o,a,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.rejectWithValue,o=n.getState,!(a=o().todos.list.find((function(t){return t.id===e})))){t.next=11;break}return t.next=5,fetch("https://jsonplaceholder.typicode.com/todos/".concat(a.id),{method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify({completed:!a.completed})});case 5:if((i=t.sent).ok){t.next=8;break}return t.abrupt("return",r("Can't update todo, server error"));case 8:return t.next=10,i.json();case 10:return t.abrupt("return",t.sent);case 11:return t.abrupt("return",r("Can't find todo"));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),m=(0,l.hg)("todos/deleteTodo",function(){var t=(0,c.Z)((0,s.Z)().mark((function t(e,n){var r,o,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.rejectWithValue,o=n.getState,!(a=o().todos.list.find((function(t){return t.id===e})))){t.next=9;break}return t.next=5,fetch("https://jsonplaceholder.typicode.com/todos/".concat(a.id),{method:"DELETE"});case 5:if(t.sent.ok){t.next=8;break}return t.abrupt("return",r("Can't delete todo, server error"));case 8:return t.abrupt("return",a);case 9:return t.abrupt("return",r("Can't find todo"));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),x=n(1694),v=n.n(x),j=n(184),b=function(t){var e=u(),n=t.id;return(0,j.jsxs)("li",{className:v()("todo-item",{"todo-item_done":t.completed}),children:[(0,j.jsx)("input",{className:"todo-item__checkbox",type:"checkbox",id:String(t.id),onChange:function(){e(h(n))},checked:t.completed}),(0,j.jsx)("h3",{className:"todo-item__title",children:t.title}),(0,j.jsx)("button",{className:"todo-item__delete",onClick:function(){e(m(n))},children:"\u274c"})]})};function g(){var t=d((function(t){return t.todos.list}));return(0,j.jsx)("ul",{className:"todo-list",children:t.map((function(t){return(0,j.jsx)(b,(0,a.Z)({},t),t.id)}))})}var k=function(t){var e=t.value,n=t.updateValue,r=t.handleSubmit;return(0,j.jsxs)("div",{className:"todo-input",children:[(0,j.jsx)("input",{className:"todo-input__input-field",type:"text",value:e,onChange:function(t){return n(t.target.value)}}),(0,j.jsx)("button",{className:"todo-input__submit-button",onClick:r,children:"Add Todo"})]})};var y=function(){var t=(0,r.useState)(""),e=(0,o.Z)(t,2),n=e[0],a=e[1],i=u(),s=d((function(t){return t.todos})),c=s.loading,l=s.error;return(0,r.useEffect)((function(){i(f())}),[i]),c?(0,j.jsx)("h2",{children:"Loading..."}):l?(0,j.jsx)("h2",{children:"Error"}):(0,j.jsx)("div",{className:"todo-container",children:(0,j.jsxs)("div",{className:"todo-inner-container",children:[(0,j.jsx)(k,{value:n,updateValue:function(t){a(t)},handleSubmit:function(){n.trim().length&&(i(p(n.trim())),a(""))}}),(0,j.jsx)(g,{})]})})},C={list:[],loading:!1,error:void 0},Z=function(t){return t.type.endsWith("rejected")},_=function(t){return t.type.endsWith("pending")},N=(0,l.oM)({name:"todos",initialState:C,reducers:{},extraReducers:function(t){t.addCase(f.fulfilled,(function(t,e){t.list=e.payload,t.error=void 0,t.loading=!1})).addCase(p.fulfilled,(function(t,e){t.list.push(e.payload),t.error=void 0,t.loading=!1})).addCase(h.fulfilled,(function(t,e){var n=t.list.find((function(t){return t.id===e.payload.id}));n&&(n.completed=!n.completed),t.error=void 0,t.loading=!1})).addCase(m.fulfilled,(function(t,e){t.list=t.list.filter((function(t){return t.id!==e.payload.id})),t.error=void 0,t.loading=!1})).addMatcher(Z,(function(t,e){t.error=e.payload,t.loading=!1})).addMatcher(_,(function(t){t.error=void 0,t.loading=!0}))}}),w=N.reducer,S=(0,l.xC)({reducer:{todos:w}}),T=function(){return(0,j.jsx)(i.zt,{store:S,children:(0,j.jsx)(y,{})})}}}]);
//# sourceMappingURL=116.94a370e5.chunk.js.map